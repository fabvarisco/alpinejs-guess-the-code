<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./styles/global.css" />
  <link rel="stylesheet" href="./styles/terminal/terminal.css" />
  <link rel="stylesheet" href="./styles/terminal/searchBar.css" />
  <link rel="stylesheet" href="./styles/IDE/sidebar.css" />
  <link rel="stylesheet" href="./libs/prism.css" />
  <title>Visual Hello Code - VHC</title>
</head>

<body x-data="AppData">
  <div class="ide-container">
    <!-- Header/Title Bar -->
    <header class="title-bar">
      <div class="title-bar-controls">
        <span><img width="18" src="./vite.svg" /></span>
      </div>
      <div class="title-bar-title">helloworld</div>
      <div x-data="ThemeData" class="title-bar-menu" @click="showThemeList = true">
        <span>Theme</span>

        <div x-show="showThemeList" class="theme-list">
        <template x-for="theme in themeList" >
          <span x-text="theme" @click="selectTheme(theme)"></span>
        </template>
        </div>
      </div>
    </header>

    <!-- Main IDE Layout -->
    <main class="ide-main"  x-transition>
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <h3>Explorer</h3>
        </div>
        <!-- File Tree -->
        <div class="file-tree">
          <div class="file-item" @click="selectedFile = 'readme'" :class="selectedFile === 'readme' ? 'active' : ''">
            <span class="file-icon">üìÑ</span>
            <span>README.md</span>
          </div>
          <div class="file-item" @click="selectedFile = 'helloworld'" :class="selectedFile === 'helloworld' ? 'active' : ''">
            <span class="file-icon">üìÑ</span>
            <span>helloworld</span>
          </div>
          <div class="file-item" @click="selectedFile = 'tip'" :class="selectedFile === 'tip' ? 'active' : ''">
            <span class="file-icon">üìÑ</span>
            <span>tip.txt</span>
          </div>
        </div>
      </aside>

      <!-- Editor Area -->
      <div class="editor-container">
        <!-- Tabs -->
        <div class="editor-tabs">
          <div class="tab active">
            <span class="tab-icon">üìÑ</span>
            <span>helloworld</span>
            <span class="tab-close">√ó</span>
          </div>
        </div>
        
        <!-- Editor Container -->
        <!-- README.md -->
        <section x-show="selectedFile === 'readme'">
          Readme
        </section>

        <!-- Code Editor -->
        <section 
          class="editor-container" 
          x-show="selectedFile === 'helloworld'">
          <pre>
            <code
              data-break-lines="50"
              id="code-block"
              :class="primsClass"
              class="line-numbers"
              x-text="helloWorld"
            ></code>
          </pre>
        </section>


        <!-- Tip.txt -->
        <section x-show="selectedFile === 'tip'">
          tip
        </section>
      </div>
    </main>

    <!-- Terminal -->
    <div class="terminal-container">
      <div class="terminal-header">
        <div class="terminal-tabs">
          <div class="terminal-tab" @click="selectedTerminal = 'game'" :class="selectedTerminal === 'game' ? 'active' : ''">
            <span class="terminal-icon">‚ö°</span>
            <span>Game Terminal</span>
          </div>
          <div class="terminal-tab" @click="selectedTerminal = 'debug'" :class="selectedTerminal === 'debug' ? 'active' : ''">
            <span class="terminal-icon">üîß</span>
            <span>Debug Console</span>
          </div>
        </div>
      </div>

      <!-- Game Terminal -->
      <div x-data="TerminalData" class="terminal-content" x-show="selectedTerminal === 'game'" >
        <!-- Terminal Output -->
        <div class="terminal-output" x-ref="gameTerminalContainer">
          <div class="terminal-line">
            <span class="terminal-prompt">game@terminal:~$</span>
            <span class="terminal-text">Welcome to Guess the Code Terminal!</span>
          </div>
          <div class="terminal-line">
            <span class="terminal-prompt">game@terminal:~$</span>
            <span class="terminal-text">Analyze the code above and guess the programming
              language.</span>
          </div>

          <!-- Wrong Answers History -->
          <template x-for="language in wrongList" :key="`wrong-${language}`">
            <div class="terminal-line error">
              <span class="terminal-prompt">game@terminal:~$</span>
              <span class="terminal-text">guess "<span x-text="language"></span>"</span>
              <span class="terminal-error">‚ùå Wrong! Try again.</span>
            </div>
          </template>

          <!-- WIN -->
           <div x-ref="wonContainer">
          <template x-if="$store.wonChallangeStore.won  === true">
            <div class="terminal-line error">
              <span class="terminal-prompt">game@terminal:~$</span>
              <span class="terminal-text">guess "<span x-text="selectedLanguage"></span>"</span>
              <span class="terminal-error">WIN!</span>
            </div>
          </template>
          </div>

        </div>
        <!-- Terminal Input -->
        <div class="terminal-input-container"
          @keydown.arrow-down.prevent="handleSelectLanguageOnList(1)"
          @keydown.arrow-up.prevent="handleSelectLanguageOnList(-1)"
          @keydown.tab.prevent="handleSelectLanguageOnList(1)"
          @keydown.enter.prevent="selectLanguage(filteredLanguages[selectedIndex])">
          <span class="terminal-prompt">game@terminal:~$</span>
          <span class="terminal-command">guess "</span>
          <input class="terminal-input" type="text" placeholder="language-name" x-model="search"
          @input="filteredLanguages" />
          <span class="terminal-command">"</span>

          <!-- Send Button estilo terminal -->
          <button class="terminal-send" @click="selectLanguage(search)" title="Send (Enter)" aria-label="Send guess">
            [ENTER]
          </button>

          <!-- Autocomplete -->
          <div class="terminal-autocomplete" 
            x-show="search.length > 0 && filteredLanguages.length > 0" 
            x-transition>
            <div class="autocomplete-header">Suggestions:</div>
            <template x-for="(language, index) in filteredLanguages.slice(0, 5)" :key="language">
              <div class="autocomplete-item" :class="{ 'selected': index === selectedIndex }" x-text="language" x-
                @click="selectLanguage(language)"></div>
            </template>
          </div>
        </div>
      </div>

      <!-- Debug Terminal -->
      <div class="terminal-content" x-show="selectedTerminal === 'debug'">
        <!-- Terminal Output -->
        <div class="terminal-output">

        </div>

        <!-- Terminal Input -->
        <div class="terminal-input-container"
        @keydown.arrow-down.prevent="handleSelectLanguageOnList(1)"
        @keydown.arrow-up.prevent="handleSelectLanguageOnList(-1)"
        @keydown.tab.prevent="handleSelectLanguageOnList(1)"
        @keydown.enter.prevent="selectLanguage(filteredLanguages[selectedIndex])">
        <span class="terminal-prompt">debug@terminal:~$</span>
        <span class="terminal-command">"</span>
        <input class="terminal-input" type="text" placeholder="" x-model="search"
        @input="filteredLanguages" />
        <span class="terminal-command">"</span>

          <!-- Send Button estilo terminal -->
          <button class="terminal-send" @click="selectLanguage(search)" title="Send (Enter)" aria-label="Send guess">
            [ENTER]
          </button>
        </div>
      </div>

   
       
    </div>
    <script type="module" src="./index.js"></script>
    <script src="./libs/prism.js"></script>
</body>

</html>